<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book Details - Notora</title>
  <link rel="icon" href="images/logo.png" />
  <script src="https://kit.fontawesome.com/1c020da525.js" crossorigin="anonymous"></script>

  <style>
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: radial-gradient(circle at top, #111 0%, #000 100%);
      color: #fff;
      overflow-x: hidden;
    }

    /* ---------- HEADER ---------- */
    header {
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      padding: 1rem 2rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(12px);
    }

    .back-arrow {
      position: absolute;
      left: 20px;
      font-size: 1.6rem;
      color: #fff;
      cursor: pointer;
      transition: transform 0.3s;
    }

    .back-arrow:hover {
      transform: translateX(-5px);
    }

    header h1 {
      font-size: 1.6rem;
      text-align: center;
      letter-spacing: 1px;
      animation: fadeInDown 0.6s ease;
    }

    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-15px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ---------- PDF CONTAINER ---------- */
    .pdf-container {
      margin: 2rem auto 1rem;
      width: 90%;
      max-width: 900px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      backdrop-filter: blur(8px);
      padding: 1rem;
      box-shadow: 0 0 30px rgba(255, 0, 0, 0.25);
      animation: fadeIn 1s ease;
      position: relative;
    }

    iframe {
      width: 100%;
      height: 500px;
      border-radius: 10px;
      border: none;
    }

    .fullscreen-btn {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background: #e50914;
      color: #fff;
      border: none;
      padding: 0.6rem 1rem;
      font-size: 0.9rem;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .fullscreen-btn:hover {
      background: #ff2424;
      transform: scale(1.05);
    }

    /* ---------- BOOK META ---------- */
    .book-meta {
      width: 90%;
      max-width: 900px;
      margin: 1.5rem auto;
      background: rgba(255, 255, 255, 0.05);
      padding: 1.5rem;
      border-radius: 12px;
      text-align: center;
      animation: fadeInUp 1s ease;
    }

    .book-meta p {
      margin: 0.3rem 0;
      color: #ccc;
      font-size: 1rem;
    }

    .rating {
      color: gold;
      font-size: 1.2rem;
      margin-top: 0.5rem;
    }

    /* ---------- SUGGESTIONS ---------- */
    .suggestions {
      margin: 2.5rem auto 4rem;
      width: 90%;
      max-width: 1100px;
      animation: fadeInUp 1.2s ease;
    }

    .suggestions h3 {
      font-size: 1.4rem;
      color: #fff;
      margin-bottom: 1rem;
      position: relative;
      text-align: left;
    }

    .suggestions h3::after {
      content: '';
      display: block;
      width: 80px;
      height: 3px;
      background: #e50914;
      margin-top: 5px;
      border-radius: 2px;
    }

    .suggestion-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
    }

    .suggestion-card {
      background: rgba(255, 255, 255, 0.07);
      border-radius: 10px;
      padding: 0.5rem;
      text-align: center;
      transition: transform 0.35s, box-shadow 0.35s;
      cursor: pointer;
    }

    .suggestion-card img {
      width: 100%;
      height: 210px;
      border-radius: 8px;
      object-fit: cover;
      margin-bottom: 0.5rem;
    }

    .suggestion-card:hover {
      transform: scale(1.05);
      box-shadow: 0 0 25px rgba(229, 9, 20, 0.4);
    }

    /* ---------- ANIMATIONS ---------- */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ---------- RESPONSIVE ---------- */
    @media (max-width: 768px) {
      iframe { height: 420px; }
      .book-meta { font-size: 0.95rem; }
      header h1 { font-size: 1.3rem; }
      .fullscreen-btn { padding: 0.5rem 0.8rem; font-size: 0.8rem; }
    }

    /* ðŸ”¹ Bookmark Button */
    .bookmark-btn {
      width: 100%;
      background: linear-gradient(90deg, #ff4b2b, #ff416c);
      color: #fff;
      border: none;
      padding: 0.8rem;
      font-size: 1rem;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 0.8rem;
      transition: all 0.3s ease;
    }

    .bookmark-btn:hover {
      background: linear-gradient(90deg, #ff6347, #ff416c);
      transform: scale(1.03);
      box-shadow: 0 0 20px rgba(255, 65, 108, 0.5);
    }

    .bookmark-btn i {
      margin-right: 8px;
    }



    
  </style>
</head>

<body>
 
  <header>
    <i class="fa-solid fa-arrow-left back-arrow" onclick="window.history.back()"></i>
    <h1 id="bookName"></h1>
  </header>

  
  <div class="pdf-container">
    <iframe id="bookPdf"></iframe>
    <button class="fullscreen-btn" id="fullscreenBtn">Fullscreen</button>
  </div>

   <button class="bookmark-btn" id="bookmarkBtn">
      <i class="fa-solid fa-bookmark"></i> Add to Bookmarks
    </button>
  </div>

  
  <section class="book-meta">
    <p><strong>Author:</strong> <span id="bookAuthor"></span></p>
    <p><strong>Genre:</strong> <span id="bookGenre"></span></p>
    <p class="rating" id="bookRating"></p>
  </section>

  
  <section class="suggestions">
    <h3>Similar Books You May Like</h3>
    <div class="suggestion-grid" id="suggestionGrid"></div>
  </section>

  <script>
    
    const book = JSON.parse(localStorage.getItem("selectedBook"));

    if (book) {
      document.getElementById('bookName').textContent = book.name;
      document.getElementById('bookAuthor').textContent = book.author;
      document.getElementById('bookGenre').textContent = book.genre;
      document.getElementById('bookRating').textContent = 'â­ ' + book.rating;
      document.getElementById('bookPdf').src = book.pdfUrl;
    }

    
    const fullscreenBtn = document.getElementById('fullscreenBtn');
    fullscreenBtn.addEventListener('click', () => {
      const iframe = document.getElementById('bookPdf');
      if (iframe.requestFullscreen) {
        iframe.requestFullscreen();
      } else if (iframe.mozRequestFullScreen) {
        iframe.mozRequestFullScreen();
      } else if (iframe.webkitRequestFullscreen) {
        iframe.webkitRequestFullscreen();
      } else if (iframe.msRequestFullscreen) {
        iframe.msRequestFullscreen();
      }
    });

   
    async function loadSuggestions() {
      try {
        const res = await fetch(`data/${book.genre}.json`);
        const data = await res.json();
        const suggestions = data.filter(b => b.name !== book.name).slice(0, 6);

        const grid = document.getElementById('suggestionGrid');
        grid.innerHTML = '';
        suggestions.forEach(b => {
          const card = document.createElement('div');
          card.classList.add('suggestion-card');
          card.innerHTML = `
            <img src="${b.thumbnail}" alt="${b.name}" />
            <p>${b.name}</p>
          `;
          card.addEventListener('click', () => {
            localStorage.setItem("selectedBook", JSON.stringify(b));
            window.location.reload();
          });
          grid.appendChild(card);
        });
      } catch (err) {
        console.error('Error loading suggestions:', err);
      }
    }

    loadSuggestions();



    //  const bookmarkBtn = document.getElementById('bookmarkBtn');
    // bookmarkBtn.addEventListener('click', () => {
    //   if (!book) return;

    //   let bookmarks = JSON.parse(localStorage.getItem("bookmarks")) || [];
    //   const exists = bookmarks.some(b => b.name === book.name);

    //   if (exists) {
    //     alert("ðŸ“š This book is already in your bookmarks!");
    //   } else {
    //     bookmarks.push(book);
    //     localStorage.setItem("bookmarks", JSON.stringify(bookmarks));
    //     alert("âœ… Book added to your bookmarks!");
    //   }
    // });
    const bookmarkBtn = document.getElementById('bookmarkBtn');
bookmarkBtn.addEventListener('click', () => {
  if (!book) return;

  let bookmarks = JSON.parse(localStorage.getItem("bookmarks")) || [];
  const exists = bookmarks.some(b => b.name === book.name);

  // ðŸ”¹ Helper: inline popup animation (center screen)
  function showPopup(message, bgColor='#3498db') {
    let popup = document.createElement('div');
    popup.textContent = message;
    popup.style.position = 'fixed';
    popup.style.top = '50%';
    popup.style.left = '50%';
    popup.style.transform = 'translate(-50%, -50%) scale(0.9)';
    popup.style.background = bgColor;
    popup.style.color = '#fff';
    popup.style.padding = '14px 24px';
    popup.style.borderRadius = '10px';
    popup.style.opacity = '0';
    popup.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
    popup.style.zIndex = '9999';
    popup.style.fontWeight = '500';
    popup.style.boxShadow = '0 4px 15px rgba(0,0,0,0.2)';
    document.body.appendChild(popup);

    // Fade-in + scale animation
    setTimeout(()=>{
      popup.style.opacity = '1';
      popup.style.transform = 'translate(-50%, -50%) scale(1)';
    }, 10);

    // Fade-out and remove after 2s
    setTimeout(()=>{
      popup.style.opacity = '0';
      popup.style.transform = 'translate(-50%, -50%) scale(0.9)';
      setTimeout(()=>popup.remove(), 400);
    }, 2000);
  }

  if (exists) {
    showPopup("ðŸ“š This book is already in your bookmarks!", '#e67e22');
  } else {
    bookmarks.push(book);
    localStorage.setItem("bookmarks", JSON.stringify(bookmarks));
    showPopup("âœ… Book added to your bookmarks!", '#27ae60');
  }
});













  
  // const book = JSON.parse(localStorage.getItem("selectedBook"));
  // if (book) {
  //   document.getElementById('bookName').textContent = book.name;
  //   document.getElementById('bookAuthor').textContent = book.author;
  //   document.getElementById('bookGenre').textContent = book.genre;
  //   document.getElementById('bookRating').textContent = 'â­ ' + book.rating;
  //   document.getElementById('bookPdf').src = book.pdfUrl;
  // }

  
  // const fullscreenBtn = document.getElementById('fullscreenBtn');
  // fullscreenBtn.addEventListener('click', () => {
  //   const iframe = document.getElementById('bookPdf');
  //   if (iframe.requestFullscreen) iframe.requestFullscreen();
  //   else if (iframe.mozRequestFullScreen) iframe.mozRequestFullScreen();
  //   else if (iframe.webkitRequestFullscreen) iframe.webkitRequestFullscreen();
  //   else if (iframe.msRequestFullscreen) iframe.msRequestFullscreen();
  // });

  
  // async function loadSuggestions() {
  //   try {
  //     const res = await fetch(`data/${book.genre}.json`);
  //     const data = await res.json();
  //     const suggestions = data.filter(b => b.name !== book.name).slice(0, 6);

  //     const grid = document.getElementById('suggestionGrid');
  //     grid.innerHTML = '';
  //     suggestions.forEach(b => {
  //       const card = document.createElement('div');
  //       card.classList.add('suggestion-card');
  //       card.innerHTML = `
  //         <img src="${b.thumbnail}" alt="${b.name}" />
  //         <p>${b.name}</p>
  //       `;
  //       card.addEventListener('click', () => {
  //         localStorage.setItem("selectedBook", JSON.stringify(b));
  //         window.location.href = "book.html"; 
  //       });
  //       grid.appendChild(card);
  //     });
  //   } catch (err) {
  //     console.error('Error loading suggestions:', err);
  //   }
  // }

  // loadSuggestions();





 


  </script>
  
</body>
</html>
