<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
 

  
  <title>Notora</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

    


  <div class="hero-container">
    <canvas id="snowCanvas"></canvas>
    <div class="hero-text">
      <h1>Unlock a World of Free Books & Knowledge</h1>
      <p>Explore thousands of educational books and resources — shared by learners, for learners.</p>
      <a href="home.html" class="cta">Discover More</a>
    </div>
  </div>

  <section class="offer-section">
  <h2 class="offer-heading">What We Offer</h2>
  <p class="offer-subtitle">
    Notora isn't just a website — it's a vibrant learning ecosystem where knowledge is free, progress is visible, and everyone contributes.
  </p>
  <div class="offer-cards">
    <div class="offer-card">
      <div class="offer-icon"><i class="fas fa-book-open"></i></div>
      <h3>Explore Limitless Books</h3>
      <p>
        Access a massive collection of books across every genre — academic, non-academic, competitive, personal development, and more. Download or read online anytime, absolutely free.
      </p>
      <a href="home.html" class="offer-btn">Explore Books</a>
    </div>
    <div class="offer-card glow">
      <div class="offer-icon"><i class="fas fa-chalkboard-teacher"></i></div>
      <h3>Track Your Learning Journey</h3>
      <p>
        Your growth matters. As you read and explore books, your reading level increases — giving you insight into how much you've learned and accomplished.
      </p>
      <a href="home.html" class="offer-btn">Track Journey</a>
    </div>
    <div class="offer-card">
      <div class="offer-icon"><i class="fas fa-share-alt"></i></div>
      <h3>Share & Contribute</h3>
      <p>
        Join hands with thousands of learners. Upload your favorite books, notes, or study material and empower others on their educational journey. Every contribution counts — be the reason someone learns better today.
      </p>
      <a href="share.html" class="offer-btn">Start Sharing</a>
    </div>
  </div>
</section>

<!-- Realistic Liquid Wave Divider -->
<div class="liquid-wave-divider">
  <svg class="wave-layer wave-layer1" viewBox="0 0 1200 120" preserveAspectRatio="none">
    <path d="M0,40 C150,80 350,0 600,40 C850,80 1050,0 1200,40 L1200,120 L0,120 Z"></path>
  </svg>
  <svg class="wave-layer wave-layer2" viewBox="0 0 1200 120" preserveAspectRatio="none">
    <path d="M0,30 C200,70 400,10 600,30 C800,50 1000,10 1200,30 L1200,120 L0,120 Z"></path>
  </svg>
  <svg class="wave-layer wave-layer3" viewBox="0 0 1200 120" preserveAspectRatio="none">
    <path d="M0,50 C250,90 400,20 600,50 C800,80 1000,20 1200,50 L1200,120 L0,120 Z"></path>
  </svg>
</div>




<section class="how-it-works">
  <h2 class="hiw-title">How It Works</h2>
  <p class="hiw-subtitle">Start learning instantly — no sign-up, no hassle. Here's how you can make the most of EduSpark:</p>
  <div class="hiw-steps">
    <div class="hiw-step">
      <div class="hiw-number">1</div>
      <h3>Open & Start</h3>
      <p>No need to log in or sign up. Just visit the website and dive into thousands of free educational resources, books, and courses — anytime, anywhere.</p>
    </div>
    <div class="hiw-step">
      <div class="hiw-number">2</div>
      <h3>Explore & Learn</h3>
      <p>Browse our massive library, filter by category or exam, and start learning at your own pace. Discover new topics, subjects, and more — all in one place.</p>
    </div>
    <!-- <div class="hiw-step">
      <div class="hiw-number">3</div>
      <h3>Contribute & Grow</h3>
      <p>Share your resources with others, give feedback, and help the EduSparK community thrive.</p>
    </div> -->
  </div>
</section>

<!-- WHY CHOOSE US SECTION -->
<section style="background: #111; padding: 60px 20px; color: white; font-family: 'Poppins', sans-serif;">
  <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
    <h2 style="color: #f87171; font-size: 2.5rem; font-weight: 700; margin-bottom: 10px; animation: fadeInDown 1s ease;">Why Choose Us?</h2>
    <p style="color: #d1d5db; font-size: 1.1rem; margin-bottom: 50px; animation: fadeInUp 1s ease;">
      We believe in providing a secure, free, and community-focused learning environment unlike any other.
    </p>
    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 30px;">
      
      <!-- Box 1 -->
      <div class="why-box">
        <div class="offer-icon"><i class="fa fa-gift"></i></div>
        <h3>Absolutely Free</h3>
        <p>Our core platform is and always will be free. Access a world of knowledge without any cost, supported by a community that believes in open education.</p>
      </div>

      <!-- Box 2 -->
      <div class="why-box">
        <div class="offer-icon"><i class="fas fa-user-shield feature-icon"></i></i></div>
        <h3>Secure & Verified</h3>
        <p>Your safety is paramount. We strictly prohibit phishing links and harmful shorteners. Our platform is built on secure Google services you can trust.</p>
      </div>

      <!-- Box 3 -->
      <div class="why-box">
        <div class="offer-icon"><i class="fas fa-users feature-icon"></i></i></div>
        <h3>Community Driven</h3>
        <p>Notora is powered by its users. Every book shared and every piece of feedback given helps us build the ultimate free learning resource, together.</p>
      </div>
    </div>
  </div>
</section>

<!-- Mobile UI improvement: toast container for notifications -->
<div class="toast-container" id="toastContainer"></div>

<!-- Floating draggable clock -->
<div class="floating-clock" id="floatingClock" title="Open Study Timer">
  <div class="pulse"></div>
  <div class="time-mini" id="miniTime">25:00</div>
</div>

<!-- Modal -->
<div class="ts-overlay" id="overlay" aria-hidden="true">
  <div class="ts-modal" role="dialog" aria-modal="true" aria-label="Study Timer Modal">
    <!-- left: timer view & stats -->
    <div class="panel-left">
      <div class="modal-head">
        <div class="title">
          <div class="brand-badge">ES</div>
          <div>
            <h3>Study Timer</h3>
            <div class="small-muted">Pomodoro • Focus Sessions</div>
          </div>
        </div>

        <div style="display:flex;gap:8px;align-items:center;">
          <div class="view-toggle">
            <div class="chip active" id="viewTimerBtn"><i class="fa-solid fa-stopwatch"></i><span style="display:none;" class="chip-text">Timer</span></div>
            <div class="chip" id="viewGraphBtn"><i class="fa-solid fa-chart-column"></i><span style="display:none;" class="chip-text">Graph</span></div>
          </div>
          <!-- Mobile UI improvement: close button -->
          <button class="close-modal-btn" id="closeModalBtn" aria-label="Close modal">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
      </div>

      <!-- Timer block -->
      <div id="timerBlock" class="fade-in">
        <div class="timer-big">
          <div class="timer-display" id="timerDisplay">25:00</div>

          <div style="display:flex;gap:12px;align-items:center;">
            <div class="timer-controls">
              <button class="btn btn-start" id="startBtn"><i class="fa-solid fa-play"></i> Start</button>
              <button class="btn btn-pause" id="pauseBtn"><i class="fa-solid fa-pause"></i> Pause</button>
              <button class="btn btn-reset" id="resetBtn"><i class="fa-solid fa-rotate"></i> Reset</button>
            </div>
          </div>

          <div class="presets" aria-label="Quick time presets">
            <div class="preset-item" data-min="15">15m</div>
            <div class="preset-item" data-min="25">25m</div>
            <div class="preset-item" data-min="30">30m</div>
            <div class="preset-item" data-min="45">45m</div>
            <div class="preset-item" data-min="60">60m</div>
          </div>

          <div class="stats-row">
            <div class="stat-card">
              <div class="num" id="statSessions">0</div>
              <div class="label">Sessions</div>
            </div>
            <div class="stat-card">
              <div class="num" id="statThisWeek">0h</div>
              <div class="label">This Week</div>
            </div>
            <div class="stat-card">
              <div class="num" id="statGoalPerc">0%</div>
              <div class="label">Goal</div>
            </div>
          </div>

          <div class="progress-wrap">
            <div style="display:flex;justify-content:space-between;font-size:12px;color:var(--muted);margin-top:12px">
              <div>Today's Progress</div>
              <div id="progressLabel">0/60 min</div>
            </div>
            <div class="progress-bar" aria-label="Daily progress bar" style="margin-top:8px">
              <div id="progressFill" style="width:0%"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Graph block hidden by default -->
      <div id="graphBlock" style="display:none">
        <div style="padding:8px 4px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div style="font-weight:700;color:#e9f0ff;font-size:14px;">Focus & Progress</div>
            <div class="control-small">View: <span id="graphRange">Week</span></div>
          </div>

          <div style="display:flex;gap:8px;margin-top:10px">
            <div class="chip active" id="weekRange">Week</div>
            <div class="chip" id="monthRange">Month</div>
          </div>

          <div class="graph-wrap" style="margin-top:12px">
            <canvas id="focusChart" width="600" height="240"></canvas>
          </div>

          <div class="history" id="historyList"></div>
        </div>
      </div>

      <div class="modal-foot">
        <div>
          <div style="font-weight:700">Daily Goal (min)</div>
          <div style="margin-top:8px"><input class="goal-input" id="dailyGoal" type="number" min="10" value="60"></div>
        </div>
        <div>
          <div class="control-small">Notifications</div>
          <div style="margin-top:6px"><label style="display:inline-flex;align-items:center;gap:8px"><input type="checkbox" id="notifyToggle"> Enable</label></div>
        </div>
      </div>
    </div>

    <!-- right: history, session list & settings -->
    <div class="panel-right">
      <h4>Session History</h4>
      <div style="color:var(--muted);font-size:12px">All tracked sessions are stored locally on your device. Weekly data auto-rotates every 7 days.</div>

      <div style="margin-top:12px" id="rightStats">
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:12px">
          <div>
            <div style="font-size:11px;color:var(--muted)">Weekly Total</div>
            <div style="font-weight:800;font-size:16px" id="rightWeekTotal">0 min</div>
          </div>
          <div>
            <div style="font-size:11px;color:var(--muted)">Monthly Total</div>
            <div style="font-weight:800;font-size:16px" id="rightMonthTotal">0 min</div>
          </div>
          <div>
            <div style="font-size:11px;color:var(--muted)">Sessions</div>
            <div style="font-weight:800;font-size:16px" id="rightSessions">0</div>
          </div>
        </div>
      </div>

      <div style="margin-top:14px"><div class="graph-wrap" style="padding:12px"><canvas id="miniChart" width="400" height="120"></canvas></div></div>

      <h4 style="margin-top:16px">Recent Sessions</h4>
      <div class="history" id="recentSessions"></div>

      <div style="margin-top:12px;display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
        <button class="btn btn-start" id="exportBtn" style="flex:1;min-width:120px;"><i class="fa-solid fa-download"></i> Export</button>
        <button class="btn btn-pause" id="clearBtn" style="flex:1;min-width:120px;"><i class="fa-solid fa-trash"></i> Clear</button>
      </div>

    </div>
  </div>
</div>

<style>
  /* Mobile UI improvement: floating clock button - optimized for touch */
  .floating-clock{
    position:fixed;
    right:16px; /* Mobile UI improvement: closer to edge for easier thumb reach */
    bottom:20px;
    width:64px; /* Mobile UI improvement: larger touch target */
    height:64px;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    background:linear-gradient(135deg,var(--accent),var(--accent-2));
    color:white;
    box-shadow: 0 10px 30px rgba(124,77,255,0.18);
    cursor:grab;
    z-index:99999;
    transition: transform var(--smooth), box-shadow var(--smooth);
    user-select:none;
    -webkit-tap-highlight-color: transparent; /* Mobile UI improvement: remove tap highlight */
  }
  .floating-clock:active{
    cursor:grabbing; 
    transform:scale(.95); /* Mobile UI improvement: better touch feedback */
  }
  .floating-clock .time-mini{
    font-weight:700;
    font-size:12px;
    letter-spacing:0.5px;
  }
  .floating-clock .pulse{
    position:absolute;
    width:100%;
    height:100%;
    border-radius:50%;
    left:0;top:0;
    background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.08), transparent 30%);
    animation: floatPulse 2.8s ease-in-out infinite;
    z-index:-1;
    transform-origin:center;
  }
  @keyframes floatPulse{
    0%{transform:scale(.95);opacity:.95}
    50%{transform:scale(1.07);opacity:.7}
    100%{transform:scale(.95);opacity:.95}
  }
  
  /* Mobile UI improvement: modal overlay with mobile optimizations */
  .ts-overlay{
    position:fixed;
    inset:0;
    background:rgba(2,6,12,0.75); /* Mobile UI improvement: darker overlay for better contrast */
    display:none;
    align-items:flex-start; /* Mobile UI improvement: align to top for easier scrolling */
    justify-content:center;
    z-index:99990;
    padding:0; /* Mobile UI improvement: remove padding for full-screen modal */
    backdrop-filter: blur(8px); /* Mobile UI improvement: stronger blur */
    overflow-y:auto;
    -webkit-overflow-scrolling: touch; /* Mobile UI improvement: smooth iOS scrolling */
  }
  .ts-overlay.show{display:flex}
  
  /* Mobile UI improvement: modal redesigned for mobile-first */
  .ts-modal{
    width:100%;
    max-width:100vw;
    min-height:100vh; /* Mobile UI improvement: full-height on mobile */
    border-radius:0; /* Mobile UI improvement: no radius on mobile */
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    
    box-shadow:none; /* Mobile UI improvement: remove shadow on mobile */
    overflow:hidden;
    display:flex;
    flex-direction:column; /* Mobile UI improvement: stack panels vertically */
    transition:transform var(--smooth),opacity var(--smooth);
    transform-origin:center;
  }
  
  /* Mobile UI improvement: tablet/desktop breakpoint */
  @media(min-width:768px){ 
    .ts-overlay{
      align-items:center;
      padding:28px;
    }
    .ts-modal{
      width:920px;
      max-width:calc(100% - 48px);
      min-height:auto;
      border-radius:18px;
      display:grid;
      grid-template-columns: 1fr 420px;
      box-shadow:var(--shadow);
    }
  }
  

  
  
  /* Mobile UI improvement: left panel optimized for mobile */
  .panel-left{
    padding:20px 16px 24px 16px; /* Mobile UI improvement: tighter padding */
    border-right:none; /* Mobile UI improvement: remove border on mobile */
    border-bottom:1px solid rgba(255,255,255,0.03); /* Mobile UI improvement: bottom border instead */
    min-height:auto;
    position:relative;
  }
  
  @media(min-width:768px){
    .panel-left{
      padding:28px 28px 32px 28px;
      border-right:1px solid rgba(255,255,255,0.03);
      border-bottom:none;
      min-height:420px;
    }
  }
  
  .panel-right{
    padding:20px 16px; /* Mobile UI improvement: tighter padding */
    background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
  }
  
  @media(min-width:768px){
    .panel-right{
      padding:28px;
    }
  }

  /* Mobile UI improvement: header with close button */
  .modal-head{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px; /* Mobile UI improvement: tighter gap */
    margin-bottom:16px; /* Mobile UI improvement: reduced margin */
  }
  .modal-head .title{
    display:flex;
    gap:10px; /* Mobile UI improvement: tighter gap */
    align-items:center;
    flex:1;
  }
  .brand-badge{
    width:40px; /* Mobile UI improvement: slightly smaller */
    height:40px;
    border-radius:10px;
    background:linear-gradient(135deg,var(--accent),var(--accent-2));
    display:flex;
    align-items:center;
    justify-content:center;
    color:#fff;
    font-weight:700;
    font-size:16px; /* Mobile UI improvement: adjusted font size */
    box-shadow:0 8px 24px rgba(124,77,255,0.16);
  }
  .modal-head .title h3{
    margin:0;
    font-size:1rem; /* Mobile UI improvement: smaller heading */
  }
  .modal-head .small-muted{
    color:var(--muted);
    font-size:12px; /* Mobile UI improvement: smaller text */
    display:none; /* Mobile UI improvement: hide on smallest screens */
  }
  
  @media(min-width:480px){
    .modal-head .small-muted{display:block;}
    .modal-head .title h3{font-size:1.1rem;}
    .brand-badge{width:44px;height:44px;font-size:18px;}
  }

  /* Mobile UI improvement: close button for mobile */
  .close-modal-btn{
    width:36px;
    height:36px;
    border-radius:8px;
    background:rgba(255,255,255,0.05);
    border:none;
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    transition:all var(--smooth);
    -webkit-tap-highlight-color: transparent;
  }
  .close-modal-btn:active{
    transform:scale(.9);
    background:rgba(255,255,255,0.08);
  }

  /* Mobile UI improvement: timer display optimized */
  .timer-big{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:10px; /* Mobile UI improvement: tighter spacing */
    padding:12px 6px; /* Mobile UI improvement: reduced padding */
  }
  .timer-display{
    font-size:48px; /* Mobile UI improvement: slightly smaller for mobile */
    font-weight:800;
    color:#e9e9ff;
    letter-spacing:1px;
    text-shadow: 0 12px 40px rgba(124,77,255,0.08);
  }
  
  @media(min-width:480px){
    .timer-display{font-size:56px;}
    .timer-big{gap:12px;padding:18px 6px;}
  }
  
  /* Mobile UI improvement: controls optimized for touch */
  .timer-controls{
    display:flex;
    gap:8px; /* Mobile UI improvement: tighter gap */
    margin-top:6px;
    flex-wrap:wrap;
    justify-content:center;
  }
  .btn{
    border:none;
    padding:10px 14px; /* Mobile UI improvement: adjusted padding */
    border-radius:10px;
    font-weight:700;
    font-size:14px; /* Mobile UI improvement: slightly smaller */
    cursor:pointer;
    display:inline-flex;
    gap:8px;
    align-items:center;
    transition:transform var(--smooth),box-shadow var(--smooth);
    -webkit-tap-highlight-color: transparent;
    min-height:44px; /* Mobile UI improvement: minimum touch target */
  }
  .btn:active{transform:scale(.96);} /* Mobile UI improvement: better touch feedback */
  .btn-start{
    background:linear-gradient(90deg,#2bd48d,#18b26a);
    color:#052811; 
    box-shadow:0 14px 30px rgba(45,209,141,0.12);
  }
  .btn-pause{
    background:transparent;
    border:1px solid rgba(255,255,255,0.07);
    color:#dfe7f6;
  }
  .btn-reset{
    background:transparent;
    border:1px dashed rgba(255,255,255,0.04);
    color:var(--muted);
  }
  
  @media(min-width:480px){
    .btn{padding:12px 18px;font-size:15px;}
    .timer-controls{gap:12px;}
  }
  
  .control-small{font-size:12px;color:var(--muted);}

  /* Mobile UI improvement: presets with better touch targets */
  .presets{
    display:flex;
    gap:8px;
    flex-wrap:wrap;
    margin-top:12px;
    justify-content:center;
  }
  .preset-item{
    background:var(--glass-2);
    padding:10px 14px; /* Mobile UI improvement: larger touch area */
    min-width:50px; /* Mobile UI improvement: minimum width */
    border-radius:10px;
    color:#dbe8ff;
    font-weight:600;
    font-size:14px;
    cursor:pointer;
    transition:all .22s;
    text-align:center;
    -webkit-tap-highlight-color: transparent;
  }
  .preset-item:active{
    transform:scale(.94); /* Mobile UI improvement: touch feedback */
    box-shadow:0 10px 28px rgba(124,77,255,0.08);
  }
  
  @media(min-width:480px){
    .preset-item:hover{
      transform:translateY(-6px);
      box-shadow:0 10px 28px rgba(124,77,255,0.08);
    }
  }

  /* Mobile UI improvement: stat cards responsive */
  .stats-row{
    display:grid;
    grid-template-columns:repeat(3,1fr); /* Mobile UI improvement: always 3 columns */
    gap:8px; /* Mobile UI improvement: tighter gap */
    margin-top:16px;
  }
  .stat-card{
    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
    padding:10px 8px; /* Mobile UI improvement: tighter padding */
    border-radius:10px;
    text-align:center;
  }
  .stat-card .num{
    font-weight:800;
    font-size:18px; /* Mobile UI improvement: smaller on mobile */
    color:#fff;
  }
  .stat-card .label{
    font-size:11px; /* Mobile UI improvement: smaller label */
    color:var(--muted);
    margin-top:4px;
  }
  
  @media(min-width:480px){
    .stats-row{gap:12px;margin-top:18px;}
    .stat-card{padding:12px;}
    .stat-card .num{font-size:22px;}
    .stat-card .label{font-size:13px;margin-top:6px;}
  }

  /* Progress bar */
  .progress-wrap{margin-top:16px;}
  .progress-bar{
    height:8px; /* Mobile UI improvement: slightly thinner */
    background:rgba(255,255,255,0.04);
    border-radius:6px;
    overflow:hidden;
  }
  .progress-bar > div{
    height:100%;
    background:linear-gradient(90deg,var(--accent),var(--accent-2));
    width:0%;
    transition:width 600ms ease;
  }
  
  @media(min-width:480px){
    .progress-wrap{margin-top:18px;}
    .progress-bar{height:10px;}
  }

  /* Mobile UI improvement: right panel optimized */
  .panel-right h4{
    margin:0 0 10px 0; /* Mobile UI improvement: tighter margin */
    color:#dfe8ff;
    font-size:15px; /* Mobile UI improvement: smaller heading */
  }
  
  @media(min-width:480px){
    .panel-right h4{margin:0 0 12px 0;font-size:16px;}
  }
  
  .graph-wrap{
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:12px;
    padding:12px; /* Mobile UI improvement: tighter padding */
  }
  
  @media(min-width:480px){
    .graph-wrap{padding:14px;}
  }
  
  canvas{
    width:100%!important;
    height:200px!important; /* Mobile UI improvement: shorter on mobile */
    display:block;
  }
  
  @media(min-width:480px){
    canvas{height:240px!important;}
  }

  .history{
    margin-top:12px;
    max-height:160px; /* Mobile UI improvement: shorter on mobile */
    overflow:auto;
    padding-right:6px;
    -webkit-overflow-scrolling: touch; /* Mobile UI improvement: smooth iOS scrolling */
  }
  
  @media(min-width:480px){
    .history{max-height:180px;margin-top:14px;}
  }
  
  .session-item{
    display:flex;
    justify-content:space-between;
    padding:8px;
    border-radius:8px;
    margin-bottom:6px; /* Mobile UI improvement: tighter spacing */
    background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
    font-size:12px; /* Mobile UI improvement: smaller text */
  }
  .session-item .left{color:#dbe8ff;}
  .session-item .right{
    color:var(--muted);
    white-space:nowrap; /* Mobile UI improvement: prevent wrapping */
  }
  
  @media(min-width:480px){
    .session-item{padding:8px 10px;margin-bottom:8px;font-size:13px;}
  }

  /* Mobile UI improvement: modal footer responsive */
  .modal-foot{
    display:flex;
    flex-direction:column; /* Mobile UI improvement: stack on mobile */
    gap:12px;
    margin-top:16px;
    color:var(--muted);
    font-size:12px;
  }
  
  @media(min-width:480px){
    .modal-foot{
      flex-direction:row;
      justify-content:space-between;
      align-items:center;
      margin-top:18px;
      font-size:13px;
    }
  }
  
  .goal-input{
    width:70px; /* Mobile UI improvement: narrower */
    padding:8px;
    border-radius:8px;
    border:1px solid rgba(255,255,255,0.05); /* Mobile UI improvement: subtle border */
    background:rgba(255,255,255,0.02);
    color:#fff;
    text-align:center;
    font-size:14px;
  }
  
  @media(min-width:480px){
    .goal-input{width:80px;}
  }

  /* Mobile UI improvement: view toggle chips */
  .view-toggle{
    display:flex;
    gap:6px;
    align-items:center;
  }
  .chip{
    padding:7px 10px; /* Mobile UI improvement: adjusted padding */
    border-radius:999px;
    background:transparent;
    border:1px solid rgba(255,255,255,0.03);
    color:var(--muted);
    cursor:pointer;
    font-size:12px; /* Mobile UI improvement: smaller text */
    display:inline-flex;
    align-items:center;
    gap:4px;
    transition:all var(--smooth);
    -webkit-tap-highlight-color: transparent;
    white-space:nowrap;
  }
  .chip i{font-size:11px;} /* Mobile UI improvement: smaller icons */
  .chip.active{
    background:linear-gradient(90deg,var(--accent),var(--accent-2));
    color:#fff;
    border:none;
    box-shadow:0 12px 30px rgba(124,77,255,0.12);
  }
  
  @media(min-width:480px){
    .chip{padding:8px 10px;font-size:13px;}
    .chip i{font-size:12px;}
    .view-toggle{gap:8px;}
  }

  /* Mobile UI improvement: toast notification system */
  .toast-container{
    position:fixed;
    top:20px;
    left:50%;
    transform:translateX(-50%);
    z-index:100000;
    display:flex;
    flex-direction:column;
    gap:10px;
    pointer-events:none;
    width:calc(100% - 32px);
    max-width:400px;
  }
  .toast{
    background:linear-gradient(135deg, rgba(124,77,255,0.95), rgba(255,107,107,0.95));
    color:#fff;
    padding:12px 16px;
    border-radius:12px;
    box-shadow:0 8px 24px rgba(0,0,0,0.3);
    display:flex;
    align-items:center;
    gap:10px;
    font-size:14px;
    font-weight:600;
    animation:toastSlideIn 0.3s ease;
    pointer-events:auto;
  }
  .toast.success{
    background:linear-gradient(135deg, rgba(43,212,141,0.95), rgba(24,178,106,0.95));
  }
  .toast.warning{
    background:linear-gradient(135deg, rgba(255,193,7,0.95), rgba(255,152,0,0.95));
  }
  @keyframes toastSlideIn{
    from{opacity:0;transform:translateY(-20px);}
    to{opacity:1;transform:translateY(0);}
  }

  /* Micro animations */
  .fade-in{animation:animFade .45s ease both}
  @keyframes animFade{
    from{opacity:0;transform:translateY(6px)}
    to{opacity:1;transform:translateY(0)}
  }
  
  /* Mobile UI improvement: smooth scroll behavior */
  html{scroll-behavior:smooth;}
  
  /* Mobile UI improvement: custom scrollbar */
  .history::-webkit-scrollbar{width:4px;}
  .history::-webkit-scrollbar-track{background:rgba(255,255,255,0.02);}
  .history::-webkit-scrollbar-thumb{
    background:rgba(124,77,255,0.3);
    border-radius:4px;
  }
</style>
<script>
/* =========================
   Smart Pomodoro Widget
   - Mobile-first optimized
   - localStorage based
   - floating draggable clock
   - background timer continues when modal closed
   - weekly reset, monthly tracking
   - canvas graph (week/month)
   - toast notification system
   ========================= */

(function(){
  // ---------- Config ----------
  const DEFAULT_MIN = 25;
  const STORAGE_KEY = "es_timer_v1";
  const WEEK_KEY = "es_timer_week_start_v1";

  // ---------- DOM ----------
  const overlay = document.getElementById("overlay");
  const floating = document.getElementById("floatingClock");
  const miniTime = document.getElementById("miniTime");
  const timerDisplay = document.getElementById("timerDisplay");
  const startBtn = document.getElementById("startBtn");
  const pauseBtn = document.getElementById("pauseBtn");
  const resetBtn = document.getElementById("resetBtn");
  const presetEls = document.querySelectorAll(".preset-item");
  const statSessions = document.getElementById("statSessions");
  const statThisWeek = document.getElementById("statThisWeek");
  const statGoalPerc = document.getElementById("statGoalPerc");
  const progressFill = document.getElementById("progressFill");
  const progressLabel = document.getElementById("progressLabel");
  const dailyGoalInput = document.getElementById("dailyGoal");
  const notifyToggle = document.getElementById("notifyToggle");

  const viewTimerBtn = document.getElementById("viewTimerBtn");
  const viewGraphBtn = document.getElementById("viewGraphBtn");
  const timerBlock = document.getElementById("timerBlock");
  const graphBlock = document.getElementById("graphBlock");
  const graphRangeLabel = document.getElementById("graphRange");
  const weekRange = document.getElementById("weekRange");
  const monthRange = document.getElementById("monthRange");
  const focusCanvas = document.getElementById("focusChart");
  const miniCanvas = document.getElementById("miniChart");
  const historyList = document.getElementById("historyList");
  const recentSessions = document.getElementById("recentSessions");
  const rightWeekTotal = document.getElementById("rightWeekTotal");
  const rightMonthTotal = document.getElementById("rightMonthTotal");
  const rightSessions = document.getElementById("rightSessions");
  const exportBtn = document.getElementById("exportBtn");
  const clearBtn = document.getElementById("clearBtn");
  const overlayModal = document.querySelector(".ts-modal");
  const closeModalBtn = document.getElementById("closeModalBtn"); // Mobile UI improvement: close button
  const toastContainer = document.getElementById("toastContainer"); // Mobile UI improvement: toast container

  // ---------- state ----------
  let state = {
    // runtime
    secondsLeft: DEFAULT_MIN * 60,
    running: false,
    endTime: null,
    // data
    sessions: [], // {duration:min, timestamp:ms}
    dailyProgress: {}, // 'YYYY-MM-DD' : minutes
    weeklyTotals: {}, // weekStart(ms): totalMin
    monthlyTotals: {}, // 'YYYY-MM' : totalMin
    totalSessions: 0,
    // settings
    dailyGoal: parseInt(dailyGoalInput.value || 60, 10),
    notify: false,
  };

  // ---------- helpers ----------
  function save(){
    try { localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }
    catch(e){ console.warn("Storage failed",e); }
  }
  function load(){
    try{
      const raw = localStorage.getItem(STORAGE_KEY);
      if(raw){ Object.assign(state, JSON.parse(raw)); }
    }catch(e){ console.warn("Storage read failed", e); }
    // migrate or ensure keys:
    if(!state.sessions) state.sessions = [];
    if(!state.dailyProgress) state.dailyProgress = {};
    if(!state.weeklyTotals) state.weeklyTotals = {};
    if(!state.monthlyTotals) state.monthlyTotals = {};
    state.dailyGoal = parseInt(state.dailyGoal || dailyGoalInput.value || 60, 10);
    state.notify = !!state.notify;
  }
  function formatTime(sec){
    const m = Math.floor(sec/60).toString().padStart(2,'0');
    const s = Math.floor(sec%60).toString().padStart(2,'0');
    return `${m}:${s}`;
  }
  function getTodayKey(){ const d=new Date(); return d.toISOString().slice(0,10); }
  function getWeekStart(ts){
    const d = ts? new Date(ts) : new Date();
    // compute Monday as week start for consistent rotate (or use user's preference)
    const day = d.getDay(); // 0 Sun .. 6 Sat
    const diff = (day + 6) % 7; // days since Monday
    d.setDate(d.getDate() - diff);
    d.setHours(0,0,0,0);
    return d.getTime();
  }
  function getMonthKey(ts){
    const d = ts? new Date(ts) : new Date();
    return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}`;
  }

  // Mobile UI improvement: toast notification system
  function showToast(message, type = 'success', duration = 3000){
    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    
    const icon = type === 'success' ? 'fa-check-circle' : 
                 type === 'warning' ? 'fa-exclamation-circle' : 'fa-info-circle';
    
    toast.innerHTML = `<i class="fa-solid ${icon}"></i><span>${message}</span>`;
    toastContainer.appendChild(toast);
    
    setTimeout(() => {
      toast.style.opacity = '0';
      toast.style.transform = 'translateY(-20px)';
      setTimeout(() => toast.remove(), 300);
    }, duration);
  }

  // ---------- persistence with weekly rotation ----------
  function ensureWeeklyRotation(){
    const storedWeek = localStorage.getItem(WEEK_KEY);
    const currentWeek = getWeekStart();
    if(!storedWeek){
      localStorage.setItem(WEEK_KEY, String(currentWeek));
      return;
    }
    const weekNum = parseInt(storedWeek,10);
    if(weekNum !== currentWeek){
      // rotate: remove data older than 8 weeks (keep history in sessions though), but keep monthly
      localStorage.setItem(WEEK_KEY, String(currentWeek));
      // Optionally remove weeklyTotals older than this week to keep small
      Object.keys(state.weeklyTotals).forEach(k=>{
        if(parseInt(k,10) < currentWeek - (1000*60*60*24*7*8)) delete state.weeklyTotals[k];
      });
      save();
    }
  }

  // ---------- UI update ----------
  function refreshUI(){
    // timer display
    timerDisplay.textContent = formatTime(state.secondsLeft);
    miniTime.textContent = formatTime(state.secondsLeft);

    // stats compute
    const todayKey = getTodayKey();
    const todayMin = (state.dailyProgress[todayKey] || 0);
    const weekStart = getWeekStart();
    const weekTotal = Object.keys(state.dailyProgress).reduce((acc,k)=>{
      const d = new Date(k);
      if(getWeekStart(d.getTime()) === weekStart) return acc + (state.dailyProgress[k]||0);
      return acc;
    },0);

    const monthKey = getMonthKey();
    const monthTotal = Object.keys(state.dailyProgress).reduce((acc,k)=>{
      const mk = k.slice(0,7);
      if(mk === monthKey) return acc + (state.dailyProgress[k]||0);
      return acc;
    },0);

    statSessions.textContent = state.totalSessions || 0;
    statThisWeek.textContent = `${Math.round(weekTotal/60)}h`;
    rightWeekTotal.textContent = `${weekTotal} min`;
    rightMonthTotal.textContent = `${monthTotal} min`;
    rightSessions.textContent = `${state.totalSessions||0}`;

    // progress
    const goal = parseInt(state.dailyGoal,10) || 60;
    const pct = Math.min(100, Math.round((todayMin/goal) * 100));
    progressFill.style.width = pct + "%";
    progressLabel.textContent = `${todayMin}/${goal} min`;
    statGoalPerc.textContent = `${pct}%`;

    // history lists
    renderHistory();
    drawMiniChart();
    drawFocusChart(currGraphRange);
  }

  function renderHistory(){
    // recent sessions (last 20)
    const rec = state.sessions.slice().reverse().slice(0,20);
    recentSessions.innerHTML = rec.map(s=>{
      const dt = new Date(s.timestamp);
      const t = dt.toLocaleString();
      return `<div class="session-item"><div class="left">${s.duration} min • ${s.note || 'focus'}</div><div class="right">${t}</div></div>`;
    }).join('') || '<div style="color:var(--muted);padding:12px;border-radius:8px">No sessions yet — start a focus session to track progress.</div>';

    // history small (for graph detail)
    historyList.innerHTML = state.sessions.slice().reverse().slice(0,40).map(s=>{
      const dt=new Date(s.timestamp);
      return `<div class="session-item"><div class="left">${s.duration} min</div><div class="right">${dt.toLocaleDateString()} ${dt.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'})}</div></div>`;
    }).join('');
  }

  // ---------- timer runtime ----------
  let tickInterval = null;
  function startTimer(minutes){
    if(typeof minutes === 'number' && minutes > 0) state.secondsLeft = minutes*60;
    if(state.running) return;
    state.running = true;
    state.endTime = Date.now() + state.secondsLeft*1000;
    save();

    // Mobile UI improvement: show toast notification
    showToast('Timer started!', 'success', 2000);

    // set up tick
    tickInterval = setInterval(()=> tick(), 250);
    refreshUI();
  }
  function pauseTimer(){
    if(!state.running) return;
    state.running = false;
    // recalc secondsLeft
    if(state.endTime) state.secondsLeft = Math.max(0, Math.round((state.endTime - Date.now())/1000));
    state.endTime = null;
    clearInterval(tickInterval);
    tickInterval = null;
    save();
    
    // Mobile UI improvement: show toast notification
    showToast('Timer paused', 'warning', 2000);
    
    refreshUI();
  }
  function resetTimer(){
    pauseTimer();
    state.secondsLeft = DEFAULT_MIN*60;
    state.endTime = null;
    save();
    
    // Mobile UI improvement: show toast notification
    showToast('Timer reset', 'warning', 2000);
    
    refreshUI();
  }

  function tick(){
    if(!state.running) return;
    const remainMs = state.endTime - Date.now();
    if(remainMs <= 0){
      // session complete
      state.secondsLeft = 0;
      completeSession();
    } else {
      state.secondsLeft = Math.ceil(remainMs/1000);
      // update UI frequently
      refreshUI();
    }
  }

  // when session finishes
  function completeSession(){
    // mark session length in minutes (round)
    const durationMin = Math.max(1, Math.round(( (DEFAULT_MIN*60) - state.secondsLeft ) / 60 ) || DEFAULT_MIN);
    const ts = Date.now();
    state.sessions.push({duration: durationMin, timestamp: ts, note: 'session'});
    state.totalSessions = (state.totalSessions||0) + 1;

    // update daily progress
    const today = getTodayKey();
    state.dailyProgress[today] = (state.dailyProgress[today] || 0) + durationMin;

    // update weekly & monthly
    const weekKey = String(getWeekStart());
    state.weeklyTotals[weekKey] = (state.weeklyTotals[weekKey]||0) + durationMin;
    const monthKey = getMonthKey(ts);
    state.monthlyTotals[monthKey] = (state.monthlyTotals[monthKey]||0) + durationMin;

    // stop timer and notify
    state.running = false;
    state.endTime = null;
    state.secondsLeft = DEFAULT_MIN*60;
    save();

    // popup like notification (browser notification if allowed), small confetti substitute via modal pulse
    showSessionComplete();
    refreshUI();
  }

  function showSessionComplete(){
    // small visual: scale floating clock briefly
    floating.style.transform = "scale(1.06)";
    setTimeout(()=> floating.style.transform = "", 350);

    // Mobile UI improvement: show toast notification
    showToast('🎉 Session completed! Great work!', 'success', 4000);

    if(state.notify && "Notification" in window){
      if(Notification.permission === "granted"){
        new Notification("Pomodoro Completed", {body:"Great work — session recorded to local stats."});
      } else if(Notification.permission !== "denied"){
        Notification.requestPermission().then(p=>{
          if(p === "granted") new Notification("Pomodoro Completed",{body:"Nice! Notifications enabled."});
        });
      }
    }
    // also show ephemeral badge inside modal if open
    const oldText = startBtn.innerHTML;
    startBtn.innerHTML = '<i class="fa-solid fa-check"></i> Complete';
    setTimeout(()=> startBtn.innerHTML = oldText, 1400);
  }

  // ---------- UI events ----------
  startBtn.addEventListener("click",()=>{
    if(!state.running){
      // if secondsLeft is zero, reset to default
      if(state.secondsLeft <= 0) state.secondsLeft = DEFAULT_MIN*60;
      startTimer(Math.round(state.secondsLeft/60));
    }
  });
  pauseBtn.addEventListener("click", ()=> pauseTimer());
  resetBtn.addEventListener("click", ()=> { resetTimer(); });

  // presets
  presetEls.forEach(p=>{
    p.addEventListener("click", ()=> {
      const m = parseInt(p.dataset.min,10) || DEFAULT_MIN;
      state.secondsLeft = m*60;
      pauseTimer();
      // Mobile UI improvement: show toast notification
      showToast(`Timer set to ${m} minutes`, 'success', 2000);
      refreshUI();
    });
  });

  // floating open modal
//   floating.addEventListener("click", (e)=>{
//     // open overlay
//     overlay.classList.add("show");
//     overlay.setAttribute("aria-hidden","false");
//     overlayModal.focus?.();
//   });
// ---------- floating open modal (desktop + mobile touch fix) ----------
let isModalOpen = false; // debounce flag

function openModal() {
  if (isModalOpen) return; // prevent multiple triggers
  isModalOpen = true;
  overlay.classList.add("show");
  overlay.setAttribute("aria-hidden", "false");
  overlayModal.focus?.();
  // reset flag after tiny delay
  setTimeout(() => { isModalOpen = false; }, 100);
}

// Add both click and touchstart for mobile
floating.addEventListener("click", openModal);
floating.addEventListener("touchstart", (e) => {
  e.preventDefault(); // prevent ghost click on mobile
  openModal();
});


  // Mobile UI improvement: close button handler
  closeModalBtn.addEventListener("click", ()=>{
    overlay.classList.remove("show");
    overlay.setAttribute("aria-hidden","true");
  });

  // close overlay on background click (but do not stop timer)
  overlay.addEventListener("click", (e)=>{
    if(e.target === overlay){
      overlay.classList.remove("show");
      overlay.setAttribute("aria-hidden","true");
    }
  });

  // drag floating
  (function draggable(el){
    let isDown=false, offset={x:0,y:0}, start={x:0,y:0};
    el.addEventListener("mousedown", startDrag);
    el.addEventListener("touchstart", startDrag,{passive:false});
    function startDrag(e){
      e.preventDefault();
      isDown = true;
      const rect = el.getBoundingClientRect();
      start.x = (e.touches ? e.touches[0].clientX : e.clientX);
      start.y = (e.touches ? e.touches[0].clientY : e.clientY);
      offset.x = start.x - rect.left;
      offset.y = start.y - rect.top;
      document.addEventListener("mousemove", onMove);
      document.addEventListener("touchmove", onMove,{passive:false});
      document.addEventListener("mouseup", endDrag);
      document.addEventListener("touchend", endDrag);
    }
    function onMove(e){
      if(!isDown) return;
      const clientX = (e.touches ? e.touches[0].clientX : e.clientX);
      const clientY = (e.touches ? e.touches[0].clientY : e.clientY);
      let left = clientX - offset.x;
      let top = clientY - offset.y;
      // clamp inside viewport
      left = Math.max(8, Math.min(window.innerWidth - el.offsetWidth - 8, left));
      top = Math.max(8, Math.min(window.innerHeight - el.offsetHeight - 8, top));
      el.style.right = "auto";
      el.style.left = left + "px";
      el.style.top = top + "px";
      el.style.bottom = "auto";
    }
    function endDrag(){
      isDown = false;
      document.removeEventListener("mousemove", onMove);
      document.removeEventListener("touchmove", onMove);
      document.removeEventListener("mouseup", endDrag);
      document.removeEventListener("touchend", endDrag);
    }
  })(floating);

  // view toggle (timer/graph)
  viewTimerBtn.addEventListener("click", ()=>{
    timerBlock.style.display = "";
    graphBlock.style.display = "none";
    viewTimerBtn.classList.add("active");
    viewGraphBtn.classList.remove("active");
  });
  viewGraphBtn.addEventListener("click", ()=>{
    timerBlock.style.display = "none";
    graphBlock.style.display = "";
    viewGraphBtn.classList.add("active");
    viewTimerBtn.classList.remove("active");
  });

  // graph range toggle
  let currGraphRange = "week";
  weekRange.addEventListener("click", ()=> { 
    currGraphRange="week"; 
    drawFocusChart("week"); 
    graphRangeLabel.textContent="Week"; 
    weekRange.classList.add("active"); 
    monthRange.classList.remove("active");
  });
  monthRange.addEventListener("click", ()=> { 
    currGraphRange="month"; 
    drawFocusChart("month"); 
    graphRangeLabel.textContent="Month"; 
    monthRange.classList.add("active"); 
    weekRange.classList.remove("active");
  });
  // init chips
  weekRange.classList.add("active");
  viewTimerBtn.classList.add("active");

  // notification toggle
  notifyToggle.addEventListener("change", (e)=>{ 
    state.notify = e.target.checked; 
    save(); 
    // Mobile UI improvement: show toast notification
    if(e.target.checked){
      showToast('Notifications enabled', 'success', 2000);
      // Request permission if not granted
      if("Notification" in window && Notification.permission === "default"){
        Notification.requestPermission();
      }
    } else {
      showToast('Notifications disabled', 'warning', 2000);
    }
  });

  // export / clear
  exportBtn.addEventListener("click", ()=>{
    const blob = new Blob([JSON.stringify(state, null, 2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'eduspark_timer_export.json'; document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
    // Mobile UI improvement: show toast notification
    showToast('Data exported successfully', 'success', 3000);
  });
  clearBtn.addEventListener("click", ()=>{
    if(!confirm("Clear all local timer data? This removes sessions stored in this browser.")) return;
    state.sessions = []; 
    state.dailyProgress={}; 
    state.weeklyTotals={}; 
    state.monthlyTotals={}; 
    state.totalSessions = 0;
    save(); 
    refreshUI();
    // Mobile UI improvement: show toast notification
    showToast('All data cleared', 'warning', 3000);
  });

  // daily goal change
  dailyGoalInput.addEventListener("change", ()=>{ 
    state.dailyGoal = parseInt(dailyGoalInput.value||60,10); 
    save(); 
    refreshUI(); 
    // Mobile UI improvement: show toast notification
    showToast(`Daily goal set to ${state.dailyGoal} minutes`, 'success', 2000);
  });

  // ---------- charts (canvas drawing) ----------
  function drawMiniChart(){
    const ctx = miniCanvas.getContext('2d');
    miniCanvas.width = miniCanvas.clientWidth * devicePixelRatio;
    miniCanvas.height = miniCanvas.clientHeight * devicePixelRatio;
    ctx.scale(devicePixelRatio, devicePixelRatio);

    // prepare last 7 days data
    const labels = [];
    const data = [];
    for(let i=6;i>=0;i--){
      const d = new Date(); d.setDate(d.getDate() - i);
      const key = d.toISOString().slice(0,10);
      labels.push(d.toLocaleDateString([], {weekday:'short'}));
      data.push(state.dailyProgress[key] || 0);
    }
    // draw
    const w = miniCanvas.clientWidth;
    const h = miniCanvas.clientHeight;
    ctx.clearRect(0,0,w*devicePixelRatio,h*devicePixelRatio);
    // background
    ctx.fillStyle = "rgba(255,255,255,0.02)";
    roundRect(ctx, 0,0, w, h, 8); ctx.fill();

    // bars
    const max = Math.max(1, ...data);
    const barW = (w - 20) / data.length;
    data.forEach((v,i)=>{
      const x = 10 + i*barW;
      const barH = (v/max) * (h - 36);
      const y = h - 22 - barH;
      // gradient
      const g = ctx.createLinearGradient(x,y,x, y+barH);
      g.addColorStop(0, 'rgba(124,77,255,0.95)');
      g.addColorStop(1, 'rgba(255,107,107,0.9)');
      ctx.fillStyle = g;
      roundRect(ctx, x, y, barW*0.6, barH, 6); ctx.fill();
      // label
      ctx.fillStyle = 'rgba(255,255,255,0.8)';
      ctx.font = '10px Inter';
      ctx.fillText(labels[i], x, h - 6);
    });
  }

  function drawFocusChart(range){
    const ctx = focusCanvas.getContext('2d');
    focusCanvas.width = focusCanvas.clientWidth * devicePixelRatio;
    focusCanvas.height = focusCanvas.clientHeight * devicePixelRatio;
    ctx.scale(devicePixelRatio, devicePixelRatio);
    const w = focusCanvas.clientWidth; const h = focusCanvas.clientHeight;

    ctx.clearRect(0,0,w*devicePixelRatio,h*devicePixelRatio);
    ctx.fillStyle = "rgba(255,255,255,0.01)"; roundRect(ctx,0,0,w,h,10); ctx.fill();

    if(range === "week"){
      // last 7 days
      const labels = []; const data = [];
      for(let i=6;i>=0;i--){
        const d = new Date(); d.setDate(d.getDate() - i);
        const k = d.toISOString().slice(0,10);
        labels.push(d.toLocaleDateString([], {weekday:'short'}));
        data.push(state.dailyProgress[k] || 0);
      }
      drawLineBars(ctx, w, h, labels, data);
    } else {
      // last 6 months
      const labels = []; const data = [];
      const now = new Date();
      for(let i=5;i>=0;i--){
        const d = new Date(now.getFullYear(), now.getMonth()-i, 1);
        const k = `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}`;
        labels.push(d.toLocaleString([], {month:'short'}));
        data.push(state.monthlyTotals[k] || 0);
      }
      drawLineBars(ctx, w, h, labels, data, true);
    }
  }

  function drawLineBars(ctx,w,h,labels,data,isMonth=false){
    // compute max
    const padding = 28;
    const max = Math.max(1, ...data);
    const step = (w - padding*2) / (data.length - 1 || 1);
    // grid lines
    ctx.strokeStyle = "rgba(255,255,255,0.03)"; ctx.lineWidth = 1;
    for(let i=0;i<4;i++){
      const y = padding + i*( (h - padding*2)/3 );
      ctx.beginPath(); ctx.moveTo(padding, y); ctx.lineTo(w - padding, y); ctx.stroke();
    }
    // line
    ctx.beginPath();
    data.forEach((v,i)=>{
      const x = padding + i*step;
      const y = h - padding - (v/max) * (h - padding*2);
      if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
    });
    // stroke gradient
    const g = ctx.createLinearGradient(0,0,w,0);
    g.addColorStop(0, 'rgba(124,77,255,0.95)'); g.addColorStop(1, 'rgba(255,107,107,0.95)');
    ctx.strokeStyle = g; ctx.lineWidth = 3; ctx.stroke();

    // fill area
    ctx.lineTo(w - padding, h-padding); ctx.lineTo(padding, h-padding); ctx.closePath();
    const gf = ctx.createLinearGradient(0,0,0,h);
    gf.addColorStop(0, 'rgba(124,77,255,0.12)'); gf.addColorStop(1, 'rgba(255,107,107,0.03)');
    ctx.fillStyle = gf; ctx.fill();

    // labels
    ctx.fillStyle = 'rgba(230,240,255,0.95)'; ctx.font = '12px Inter';
    data.forEach((v,i)=>{
      const x = padding + i*step; const y = h - padding - (v/max) * (h - padding*2);
      ctx.fillText(labels[i], x - 12, h - 8);
      ctx.fillStyle = 'rgba(230,240,255,0.9)'; ctx.fillText(String(v)+'m', x - 14, y - 6);
      ctx.fillStyle = 'rgba(230,240,255,0.95)';
    });
  }

  // helper roundRect
  function roundRect(ctx,x,y,w,h,r){
    const min = Math.min(w,h);
    if(typeof r === 'undefined') r = 6;
    if(r > (min/2)) r = min/2;
    ctx.beginPath();
    ctx.moveTo(x+r,y);
    ctx.arcTo(x+w,y,x+w,y+h,r);
    ctx.arcTo(x+w,y+h,x,y+h,r);
    ctx.arcTo(x,y+h,x,y,r);
    ctx.arcTo(x,y,x+w,y,r);
    ctx.closePath();
  }

  // ---------- storage helpers for adding minutes mid-session (e.g., pausing/resuming) ----------
  function addMinutesToToday(min){
    const key = getTodayKey();
    state.dailyProgress[key] = (state.dailyProgress[key] || 0) + min;
    const wk = String(getWeekStart());
    state.weeklyTotals[wk] = (state.weeklyTotals[wk] || 0) + min;
    const mk = getMonthKey();
    state.monthlyTotals[mk] = (state.monthlyTotals[mk] || 0) + min;
    save();
  }

  // ---------- simulate mid-session saving when paused manually (optional) ----------
  // For simplicity, we only create a session when timer reaches 0. But we might also allow "finish early" to record partial sessions:
  // We'll add a right-click on reset to store current partial time as session:
  resetBtn.addEventListener("contextmenu", (e)=>{
    e.preventDefault();
    // record partial if > 1 minute
    const elapsedMin = Math.round((DEFAULT_MIN*60 - state.secondsLeft)/60);
    if(elapsedMin > 0){
      state.sessions.push({duration: elapsedMin, timestamp: Date.now(), note:"partial"});
      state.totalSessions = (state.totalSessions||0) + 1;
      addMinutesToToday(elapsedMin);
      save(); refreshUI();
      // Mobile UI improvement: show toast notification
      showToast(`Partial session saved (${elapsedMin} min)`, 'success', 3000);
    }
  });

  // ---------- load/save init ----------
  load(); ensureWeeklyRotation(); refreshUI();

  // restore timer if it was running before reload
  if(state.running && state.endTime){
    const remain = Math.round((state.endTime - Date.now())/1000);
    if(remain <= 0){
      state.running = false; state.secondsLeft = DEFAULT_MIN*60; state.endTime = null;
      save();
    } else {
      state.secondsLeft = remain;
      tickInterval = setInterval(()=> tick(), 250);
    }
  }

  // ---------- draw initial charts ----------
  drawMiniChart(); drawFocusChart(currGraphRange="week");

  // re-render when window focus changes to keep times accurate
  window.addEventListener("focus", ()=> { 
    if(state.running && state.endTime){ 
      state.secondsLeft = Math.max(0, Math.round((state.endTime - Date.now())/1000)); 
    } 
    refreshUI(); 
  });

  // Resize handling for canvas
  let resizeTimeout=null;
  window.addEventListener("resize", ()=>{ 
    clearTimeout(resizeTimeout); 
    resizeTimeout = setTimeout(()=>{ 
      drawMiniChart(); 
      drawFocusChart(currGraphRange); 
    }, 240); 
  });

  // ---------- auto save every 10s while running ----------
  setInterval(()=>{ if(state.running) save(); }, 10000);

  // Mobile UI improvement: show chip text on wider screens
  const updateChipText = () => {
    const chipTexts = document.querySelectorAll('.chip-text');
    chipTexts.forEach(text => {
      text.style.display = window.innerWidth >= 480 ? 'inline' : 'none';
    });
  };
  updateChipText();
  window.addEventListener("resize", updateChipText);

  // Mobile UI improvement: prevent scroll when modal is open
  const originalOverflow = document.body.style.overflow;
  overlay.addEventListener('transitionend', () => {
    if(overlay.classList.contains('show')){
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = originalOverflow;
    }
  });

  // Mobile UI improvement: haptic feedback for mobile devices (if supported)
  function triggerHaptic(intensity = 'light') {
    if (navigator.vibrate) {
      const patterns = {
        light: 10,
        medium: 20,
        heavy: 50
      };
      navigator.vibrate(patterns[intensity] || 10);
    }
  }

  // Mobile UI improvement: add haptic feedback to buttons
  [startBtn, pauseBtn, resetBtn, ...presetEls].forEach(btn => {
    btn.addEventListener('click', () => triggerHaptic('light'));
  });

  // Mobile UI improvement: swipe to close modal
  let touchStartY = 0;
  let touchEndY = 0;
  
  overlayModal.addEventListener('touchstart', (e) => {
    touchStartY = e.changedTouches[0].screenY;
  }, {passive: true});

  overlayModal.addEventListener('touchend', (e) => {
    touchEndY = e.changedTouches[0].screenY;
    handleSwipe();
  }, {passive: true});

  function handleSwipe() {
    const swipeDistance = touchEndY - touchStartY;
    // Swipe down to close (minimum 100px)
    if (swipeDistance > 100) {
      overlay.classList.remove("show");
      overlay.setAttribute("aria-hidden","true");
      triggerHaptic('medium');
    }
  }

  // Mobile UI improvement: keyboard shortcuts
  document.addEventListener('keydown', (e) => {
    // Only trigger if modal is open and not typing in input
    if (!overlay.classList.contains('show') || e.target.tagName === 'INPUT') return;
    
    switch(e.key) {
      case ' ': // Space to start/pause
      case 'Enter':
        e.preventDefault();
        if(state.running) pauseTimer(); else startTimer();
        break;
      case 'r': // R to reset
      case 'R':
        e.preventDefault();
        resetTimer();
        break;
      case 'Escape': // Escape to close
        overlay.classList.remove("show");
        overlay.setAttribute("aria-hidden","true");
        break;
    }
  });

  // Mobile UI improvement: add loading state to export/clear buttons
  exportBtn.addEventListener('click', () => {
    exportBtn.disabled = true;
    exportBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Exporting...';
    setTimeout(() => {
      exportBtn.disabled = false;
      exportBtn.innerHTML = '<i class="fa-solid fa-download"></i> Export';
    }, 1000);
  });

  // Mobile UI improvement: PWA install prompt handling
  let deferredPrompt;
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    // Show install toast after 5 seconds
    setTimeout(() => {
      showToast('💡 Add to Home Screen for quick access!', 'success', 5000);
    }, 5000);
  });

  // Mobile UI improvement: service worker registration for offline support
  if ('serviceWorker' in navigator) {
    // Note: This would require a separate service worker file in production
    console.log('Service Worker support detected - ready for PWA setup');
  }

  // Mobile UI improvement: battery status monitoring (pause timer on low battery)
  if ('getBattery' in navigator) {
    navigator.getBattery().then((battery) => {
      battery.addEventListener('levelchange', () => {
        if (battery.level < 0.1 && state.running) {
          pauseTimer();
          showToast('⚠️ Timer paused - Low battery detected', 'warning', 4000);
        }
      });
    });
  }

  // Mobile UI improvement: wake lock API to keep screen on during timer
  let wakeLock = null;
  async function requestWakeLock() {
    if ('wakeLock' in navigator && state.running) {
      try {
        wakeLock = await navigator.wakeLock.request('screen');
        wakeLock.addEventListener('release', () => {
          console.log('Wake Lock released');
        });
      } catch (err) {
        console.log('Wake Lock error:', err);
      }
    }
  }

  function releaseWakeLock() {
    if (wakeLock !== null) {
      wakeLock.release();
      wakeLock = null;
    }
  }

  // Mobile UI improvement: request wake lock when timer starts
  const originalStartTimer = startTimer;
  startTimer = function(...args) {
    originalStartTimer.apply(this, args);
    requestWakeLock();
  };

  // Mobile UI improvement: release wake lock when timer stops
  const originalPauseTimer = pauseTimer;
  pauseTimer = function(...args) {
    originalPauseTimer.apply(this, args);
    releaseWakeLock();
  };

  // Mobile UI improvement: visibility change handling
  document.addEventListener('visibilitychange', () => {
    if (document.hidden) {
      // Page is hidden - save state
      save();
    } else {
      // Page is visible - refresh UI and check timer
      if(state.running && state.endTime){ 
        state.secondsLeft = Math.max(0, Math.round((state.endTime - Date.now())/1000));
        if(state.secondsLeft <= 0) {
          completeSession();
        }
      }
      refreshUI();
    }
  });

  // Mobile UI improvement: connection status monitoring
  window.addEventListener('online', () => {
    showToast('✅ Back online', 'success', 2000);
  });

  window.addEventListener('offline', () => {
    showToast('📡 Offline mode - Data saved locally', 'warning', 3000);
  });

  // Mobile UI improvement: smart notification timing
  function scheduleSmartNotification() {
    if (!state.running || !state.notify) return;
    
    const halfTime = Math.floor(state.secondsLeft / 2);
    setTimeout(() => {
      if (state.running) {
        showToast('⏰ Halfway through your session!', 'success', 2000);
        triggerHaptic('medium');
      }
    }, halfTime * 1000);

    // 1 minute warning
    const oneMinuteWarning = state.secondsLeft - 60;
    if (oneMinuteWarning > 0) {
      setTimeout(() => {
        if (state.running) {
          showToast('⏱️ 1 minute remaining', 'warning', 2000);
          triggerHaptic('light');
        }
      }, oneMinuteWarning * 1000);
    }
  }

  // Mobile UI improvement: call smart notifications when timer starts
  const originalStartTimerWithNotif = startTimer;
  startTimer = function(...args) {
    originalStartTimerWithNotif.apply(this, args);
    scheduleSmartNotification();
  };

  // expose tiny API on window to allow external controls if you want
  window.ES_Timer = {
    open: ()=> { 
      overlay.classList.add('show'); 
      overlay.setAttribute("aria-hidden","false");
    },
    close: ()=> { 
      overlay.classList.remove('show'); 
      overlay.setAttribute("aria-hidden","true");
    },
    start: ()=> startTimer(),
    pause: ()=> pauseTimer(),
    reset: ()=> resetTimer(),
    export: ()=> exportBtn.click(),
    getState: ()=> JSON.parse(JSON.stringify(state)),
    // Mobile UI improvement: additional API methods
    setGoal: (minutes) => {
      state.dailyGoal = parseInt(minutes, 10);
      dailyGoalInput.value = state.dailyGoal;
      save();
      refreshUI();
      showToast(`Daily goal updated to ${minutes} minutes`, 'success', 2000);
    },
    addSession: (minutes, note = 'manual') => {
      const ts = Date.now();
      state.sessions.push({duration: minutes, timestamp: ts, note: note});
      state.totalSessions = (state.totalSessions || 0) + 1;
      addMinutesToToday(minutes);
      save();
      refreshUI();
      showToast(`Manual session added: ${minutes} min`, 'success', 2000);
    },
    getStats: () => ({
      totalSessions: state.totalSessions,
      todayMinutes: state.dailyProgress[getTodayKey()] || 0,
      weekTotal: Object.keys(state.dailyProgress).reduce((acc, k) => {
        const d = new Date(k);
        if (getWeekStart(d.getTime()) === getWeekStart()) return acc + (state.dailyProgress[k] || 0);
        return acc;
      }, 0),
      monthTotal: Object.keys(state.dailyProgress).reduce((acc, k) => {
        if (k.slice(0, 7) === getMonthKey()) return acc + (state.dailyProgress[k] || 0);
        return acc;
      }, 0),
      goalProgress: Math.round(((state.dailyProgress[getTodayKey()] || 0) / state.dailyGoal) * 100)
    })
  };

  // Mobile UI improvement: double-tap floating button for quick start
  let lastTap = 0;
  floating.addEventListener('touchend', (e) => {
    const currentTime = new Date().getTime();
    const tapLength = currentTime - lastTap;
    if (tapLength < 300 && tapLength > 0) {
      e.preventDefault();
      // Double tap detected - quick start/pause
      if (state.running) {
        pauseTimer();
      } else {
        if (state.secondsLeft <= 0) state.secondsLeft = DEFAULT_MIN * 60;
        startTimer();
      }
      triggerHaptic('medium');
    }
    lastTap = currentTime;
  });

  // Mobile UI improvement: long press floating button for reset
  let pressTimer;
  floating.addEventListener('touchstart', (e) => {
    pressTimer = setTimeout(() => {
      if (!overlay.classList.contains('show')) {
        resetTimer();
        triggerHaptic('heavy');
      }
    }, 800);
  });

  floating.addEventListener('touchend', () => {
    clearTimeout(pressTimer);
  });

  floating.addEventListener('touchmove', () => {
    clearTimeout(pressTimer);
  });

  // Mobile UI improvement: initialize notification toggle state
  notifyToggle.checked = state.notify;

  // Mobile UI improvement: add visual indicator when timer is running
  function updateFloatingClockStyle() {
    if (state.running) {
      floating.style.animation = 'pulse 1.5s ease-in-out infinite';
      floating.style.boxShadow = '0 10px 40px rgba(124,77,255,0.35)';
    } else {
      floating.style.animation = '';
      floating.style.boxShadow = '0 10px 30px rgba(124,77,255,0.18)';
    }
  }

  // Add pulse animation
  const style = document.createElement('style');
  style.textContent = `
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
  `;
  document.head.appendChild(style);

  // Update clock style on state change
  setInterval(() => {
    updateFloatingClockStyle();
  }, 1000);

  // Mobile UI improvement: show welcome toast on first load
  const hasVisited = localStorage.getItem('es_timer_visited');
  if (!hasVisited) {
    setTimeout(() => {
      showToast('👋 Welcome! Tap the floating button to start', 'success', 5000);
      localStorage.setItem('es_timer_visited', 'true');
    }, 1000);
  }

  console.log('🎉 EduSpark Pomodoro Timer initialized - Mobile optimized!');
  console.log('💡 Use ES_Timer API for programmatic control');
  console.log('📱 Features: Touch gestures, haptic feedback, wake lock, offline support');

})();
</script>

<!-- Electric Divider -->
<div class="electric-divider"></div>


<!-- ===== UNIQUE DISCOVER SECTION ===== -->
<section id="discover-section-unique">
  <div class="discover-bg"></div>
  
  <div class="discover-wrapper">
    <h2 class="discover-heading">Discover Your Next Great Read</h2>
    <p class="discover-tagline">Unlock stories, ideas, and worlds waiting just for you — curated, intelligent, and timeless.</p>
    
    <div class="discover-showcase">
      <div class="discover-slide" style="--clr:#ff3c3c;">
        <span>Genre Explorer</span>
      </div>
      <div class="discover-slide" style="--clr:#ff7b00;">
        <span>Smart Search</span>
      </div>
      <div class="discover-slide" style="--clr:#00d8ff;">
        <span>Top Rated</span>
      </div>
      <div class="discover-slide" style="--clr:#b400ff;">
        <span>Community Picks</span>
      </div>
    </div>
  </div>
</section>



<style>
/* ==== UNIQUE DISCOVER SECTION ==== */
#discover-section-unique {
  position: relative;
  background: radial-gradient(circle at center, #0d0d0d 0%, #111 100%);
  overflow: hidden;
  padding: 110px 20px;
  color: #fff;
  text-align: center;
  z-index: 1;
}

/* moving blurred gradient background */
.discover-bg {
  position: absolute;
  top: -100px;
  left: -100px;
  width: 200%;
  height: 200%;
  background: conic-gradient(
    from 0deg,
    rgba(255, 0, 100, 0.15),
    rgba(255, 100, 0, 0.1),
    rgba(255, 255, 255, 0),
    rgba(255, 0, 150, 0.1)
  );
  animation: rotateGradient 20s linear infinite;
  filter: blur(80px);
  z-index: 0;
}

@keyframes rotateGradient {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.discover-wrapper {
  position: relative;
  z-index: 1;
  max-width: 1200px;
  margin: 0 auto;
}

.discover-heading {
  font-size: 2.8rem;
  font-weight: 800;
  color: transparent;
  background: linear-gradient(90deg, #ff3c3c, #ff7b00, #ff3c3c);
  -webkit-background-clip: text;
  background-clip: text;
  animation: gradientMove 5s ease-in-out infinite;
  background-size: 200%;
  text-shadow: 0 0 25px rgba(255, 0, 0, 0.3);
}

@keyframes gradientMove {
  0% { background-position: 0%; }
  100% { background-position: 200%; }
}

.discover-tagline {
  color: #aaa;
  font-size: 1rem;
  margin: 15px 0 60px;
  letter-spacing: 0.5px;
}

/* Showcase strip animation */
.discover-showcase {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 25px;
  perspective: 1000px;
}

.discover-slide {
  position: relative;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  width: 220px;
  height: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-weight: 600;
  font-size: 1.1rem;
  overflow: hidden;
  transform-style: preserve-3d;
  transform: rotateY(0deg);
  transition: all 0.7s cubic-bezier(0.19, 1, 0.22, 1);
  box-shadow: 0 0 0 rgba(255,255,255,0);
}

.discover-slide::before {
  content: "";
  position: absolute;
  width: 180%;
  height: 180%;
  top: -40%;
  left: -40%;
  background: linear-gradient(120deg, transparent, var(--clr), transparent);
  transform: rotate(45deg);
  opacity: 0.2;
  animation: slideLight 5s linear infinite;
}

@keyframes slideLight {
  0% { transform: rotate(45deg) translateX(-200px); }
  100% { transform: rotate(45deg) translateX(200px); }
}

.discover-slide:hover {
  transform: rotateY(10deg) scale(1.1);
  box-shadow: 0 10px 25px rgba(255, 60, 60, 0.3);
}

.discover-slide span {
  position: relative;
  z-index: 2;
  letter-spacing: 0.5px;
}

/* Scroll reveal animation */
.discover-slide {
  opacity: 0;
  transform: translateY(60px);
}
.discover-slide.visible {
  opacity: 1;
  transform: translateY(0);
  transition: all 0.8s ease-out;
}

/* Responsive */
@media (max-width: 600px) {
  .discover-heading { font-size: 2rem; }
  .discover-tagline { font-size: 0.9rem; }
  .discover-slide {
    width: 160px;
    height: 100px;
    font-size: 1rem;
  }
}

.electric-divider {
  position: relative;
  height: 4px;
  background: linear-gradient(90deg, #ff0000, #ffffff, #ff0000);
  box-shadow: 0 0 15px #ff0000, 0 0 30px #ff0000;
  animation: electricMove 2s linear infinite;
}

@keyframes electricMove {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}

</style>

<script>
/* ===== Scroll Reveal for Unique Discover Section ===== */
const slides = document.querySelectorAll("#discover-section-unique .discover-slide");

const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add("visible");
      observer.unobserve(entry.target);
    }
  });
}, { threshold: 0.2 });

slides.forEach(slide => observer.observe(slide));
</script>

<!-- Gradient Glow Divider -->
<div class="glow-divider"></div>


<!-- ========== STATS SECTION ========== -->
<section class="stats-section">
  <div class="stats-overlay"></div>
  <div class="stats-container">
    <h2 class="stats-heading">Our Impact</h2>
    <p class="stats-subtext">Empowering learners worldwide with free, quality resources.</p>
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-book-open"></i></div>
        <h3 class="stat-number" data-target="50000">5k+</h3>
        <p class="stat-label"> Free Books  </p>
      </div>

      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-users"></i></div>
        <h3 class="stat-number" data-target="25000">15k+</h3>
        <p class="stat-label">Happy Readers</p>
      </div>

      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-clock"></i></div>
        <h3 class="stat-number" data-target="24">24/7</h3>
        <p class="stat-label"> Study Support</p>
      </div>
    </div>
  </div>
</section>

<script src="https://kit.fontawesome.com/a81368914c.js" crossorigin="anonymous"></script>
<!-- Glow Hover Effects -->
<style>
@keyframes fadeInDown {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.why-box {
  background-color: #1f1f1f;
  border: 1px solid #2d2d2d;
  border-radius: 12px;
  padding: 30px 25px;
  max-width: 300px;
  flex: 1;
  min-width: 250px;
  position: relative;
  overflow: hidden;
  cursor: pointer;
  text-align: center;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  animation: fadeInUp 1s ease;
}

.why-box:hover {
  transform: translateY(-10px);
  box-shadow: 0 0 20px rgba(239, 68, 68, 0.3), 0 0 40px rgba(239, 68, 68, 0.1);
}

.why-box::before {
  content: '';
  position: absolute;
  top: var(--y);
  left: var(--x);
  transform: translate(-50%, -50%);
  width: 0;
  height: 0;
  background: radial-gradient(circle, rgba(239,68,68,0.4) 0%, transparent 80%);
  border-radius: 50%;
  transition: width 0.3s ease, height 0.3s ease;
  pointer-events: none;
  z-index: 0;
}

.why-box:hover::before {
  width: 200px;
  height: 200px;
}

.why-box .icon {
  font-size: 2.5rem;
  color: #ef4444;
  margin-bottom: 20px;
  z-index: 1;
  position: relative;
}

.why-box h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: white;
  margin-bottom: 10px;
  z-index: 1;
  position: relative;
}

.why-box p {
  font-size: 0.95rem;
  color: #d1d5db;
  line-height: 1.6;
  z-index: 1;
  position: relative;
}

.glow-divider {
  height: 5px;
  background: linear-gradient(90deg, #ff0055, #ff8800, #ff0055);
  background-size: 200% 200%;
  animation: glowMove 3s linear infinite;
  box-shadow: 0 0 20px rgba(255, 0, 85, 0.6);
}

@keyframes glowMove {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}


</style>

<!-- Cursor Position Glow Script -->
<script>
document.querySelectorAll('.why-box').forEach(box => {
  box.addEventListener('mousemove', e => {
    const rect = box.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    box.style.setProperty('--x', `${x}px`);
    box.style.setProperty('--y', `${y}px`);
  });
});
</script>



<footer style="background-color: #121212; color: #d1d5db; text-align: center; padding: 2rem 1rem;">
  <!-- <div style="margin-bottom: 1rem;">
    <img src="Lucid_Realism_Create_a_modern_flat_educational_logo_with_the_b_1.png" alt="EduSpark Logo" style="height: 40px;">
    <h2 style="color: #ef4444; font-size: 1.5rem; margin-top: 0.5rem;">Notora</h2>
  </div> -->
  <div style="display: flex; justify-content: center; align-items: center; margin-top: 1rem;">
  <img src="Lucid_Realism_Create_a_modern_flat_educational_logo_with_the_b_1.png" alt="EduSpark Logo" style="height: 40px; margin-right: 8px;">
  <h2 style="color: #db3535; font-size: 1.8rem; margin: 0;">Notora</h2>
</div>


  <p style="margin-bottom: 1.5rem; max-width: 600px; margin-left: auto; margin-right: auto;">
    A collaborative platform dedicated to accessible and open education. Share, learn, and grow together.
  </p>
  <div style="margin-bottom: 1.5rem;">
    <a href="#" style="margin: 0 0.5rem;"><img src="youtube-svgrepo-com.svg"alt="YouTube" style="height: 24px; "></a>
    <a href="#" style="margin: 0 0.5rem;"><img src="128px-Instagram_logo_2016.svg.png" alt="Instagram" style="height: 24px;color:gray;"></a>
    <a href="#" style="margin: 0 0.5rem;"><img src="telegram-svgrepo-com.svg" alt="Telegram" style="height: 24px;color:gray;"></a>
  </div>
  <p style="margin-bottom: 0.5rem;">
    Have questions? Contact us at <a href="mailto:edusparkofficial@gmail.com" style="color: #ef4444;">univora8@gmail.com</a>
  </p>
  <p style="font-size: 0.875rem; color: #9ca3af;">
    © 2024 Notora. All Rights Reserved.
  </p>
</footer>



  <script src="script.js"></script>
</body>
</html>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap');

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Poppins', sans-serif;
  background-color: #0b0b0b;
  color: white;
  overflow-x: hidden;
}


header {
  background-color: #121212;
  padding: 1rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

header nav a {
  color: #ffffff;
  font-weight: 600;
  text-decoration: none;
  position: relative;
}

header nav a:first-child span {
  position: absolute;
  bottom: -8px;
  left: 0;
  width: 100%;
  height: 2px;
  background-color: #ef4444;
}

header nav a:nth-child(4) span {
  position: absolute;
  top: -8px;
  right: -28px;
  background-color: #ef4444;
  color: white;
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 6px;
}

header nav a:nth-child(5) span {
  position: absolute;
  top: -8px;
  right: -30px;
  background-color: #22c55e;
  color: white;
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 6px;
}

header a:last-child {
  background-color: #ef4444;
  color: white;
  font-weight: 600;
  padding: 0.5rem 1rem;
  border-radius: 9999px;
  text-decoration: none;
}

.hero-container {
  position: relative;
  height: 100vh;
  width: 100%;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 2rem;
}

#snowCanvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
}

.hero-text {
  position: relative;
  z-index: 2;
  max-width: 800px;
}

.hero-text h1 {
  font-size: 3rem;
  font-weight: 800;
  background: linear-gradient(to right, #ff7e5f, #feb47b);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 1rem;
}

.hero-text p {
  font-size: 1.2rem;
  color: #ccc;
  margin-bottom: 2rem;
}

.cta {
  display: inline-block;
  background: #e50914;
  color: white;
  padding: 0.8rem 2rem;
  border-radius: 30px;
  text-decoration: none;
  font-weight: 600;
  transition: 0.3s;
}

.cta:hover {
  background: #ff0f24;
}

@media (max-width: 768px) {
  .hero-text h1 {
    font-size: 2rem;
  }
  .hero-text p {
    font-size: 1rem;
  }
}


.offer-section {
  padding: 4rem 2rem;
  text-align: center;
  background-color: #0b0b0b;
}

.offer-heading {
  font-size: 2.5rem;
  color: #f59ca9;
  font-weight: 700;
  margin-bottom: 0.5rem;
}

.offer-subtitle {
  font-size: 1rem;
  color: #b8becd;
  margin-bottom: 3rem;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

.offer-cards {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 2rem;
}

.offer-card {
  background-color: #1b1b1b;
  border-radius: 1rem;
  padding: 2rem;
  max-width: 330px;
  transition: 0.3s ease;
  text-align: center;
  box-shadow: 0 0 0px rgba(255, 0, 0, 0);
  border: 1px solid transparent;
}

.offer-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 0 15px rgba(255, 0, 0, 0.3);
  border: 1px solid #ff4b5c;
}

.offer-icon {
  font-size: 3rem;
  color: #e50914;
  margin-bottom: 1rem;
}

.offer-card h3 {
  color: white;
  margin-bottom: 0.8rem;
  font-size: 1.3rem;
}

.offer-card p {
  color: #aaa;
  font-size: 0.95rem;
  margin-bottom: 1.5rem;
  line-height: 1.4;
}

.offer-btn {
  padding: 0.6rem 1.3rem;
  background: transparent;
  border: 1.5px solid #ff4b5c;
  color: #ff4b5c;
  border-radius: 25px;
  text-decoration: none;
  font-weight: 500;
  transition: 0.3s;
}

.offer-btn:hover {
  background-color: #ff4b5c;
  color: white;
}



.how-it-works {
  background-color: #1e1e1e;
  text-align: center;
  padding: 80px 20px;
  color: #ffffff;
}

.hiw-title {
  font-size: 36px;
  font-weight: 700;
  color: #fca7a7;
  /* margin-bottom: 10px; */
}

.hiw-subtitle {
  color: #a3b1c6;
  font-size: 16px;
  margin-bottom: 50px;
}

.hiw-steps {
  display: flex;
  justify-content: center;
  gap: 60px;
  flex-wrap: wrap;
  border-top: 1px solid #a53333;
  border-bottom: 1px solid #a53333;
  padding: 40px 0;
}

.hiw-step {
  max-width: 300px;
}

.hiw-number {
  width: 40px;
  height: 40px;
  border: 2px solid #f55a5a;
  color: #f55a5a;
  font-weight: bold;
  font-size: 18px;
  border-radius: 50%;
  margin: 0 auto 15px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.hiw-step h3 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 10px;
  color: #ffffff;
}

.hiw-step p {
  font-size: 14px;
  color: #cccccc;
}


footer {
  background-color: #121212;
  border-top: 1px solid #a53333;
  color: #d1d5db;
  text-align: center;
  padding: 2rem 1rem;
}

footer h2 {
  color: #ef4444;
  font-size: 1.5rem;
  margin-top: 0.5rem;
}

footer p {
  margin-bottom: 1.5rem;
}

footer a img {
  height: 24px;
  margin: 0 0.5rem;
}

footer a {
  color: #ef4444;
  text-decoration: none;
}

footer small {
  font-size: 0.875rem;
  color: #006c04;
}


/* ========== STATS SECTION STYLING ========== */
.stats-section {
  position: relative;
  background: radial-gradient(circle at top, #1a1a1a, #0d0d0d);
  color: #fff;
  text-align: center;
  padding: 100px 20px;
  overflow: hidden;
}

.stats-overlay {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: linear-gradient(135deg, rgba(255, 75, 75, 0.1), rgba(255, 50, 120, 0.1));
  z-index: 1;
}

.stats-container {
  position: relative;
  z-index: 2;
}

.stats-heading {
  font-size: 2.8rem;
  font-weight: 700;
  color: #ff6b81;
  letter-spacing: 1px;
  margin-bottom: 10px;
  animation: fadeInDown 1s ease forwards;
}

.stats-subtext {
  color: #c9c9c9;
  margin-bottom: 60px;
  font-size: 1.1rem;
  animation: fadeIn 1.5s ease forwards;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 40px;
  justify-items: center;
}

.stat-card {
  background: linear-gradient(145deg, #141414, #1e1e1e);
  border-radius: 20px;
  padding: 40px 20px;
  box-shadow: 0 0 25px rgba(255, 90, 90, 0.15);
  transition: all 0.4s ease;
  position: relative;
  overflow: hidden;
}

.stat-card::before {
  content: "";
  position: absolute;
  top: -50%; left: -50%;
  width: 200%; height: 200%;
  background: radial-gradient(circle, rgba(255, 90, 90, 0.15) 0%, transparent 70%);
  transform: scale(0);
  transition: transform 0.5s ease;
}

.stat-card:hover::before {
  transform: scale(1);
}

.stat-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 0 35px rgba(255, 75, 75, 0.3);
}

.stat-icon {
  font-size: 2.5rem;
  color: #ff6b81;
  margin-bottom: 20px;
  transition: transform 0.3s ease;
}

.stat-card:hover .stat-icon {
  transform: rotate(10deg) scale(1.2);
}

.stat-number {
  font-size: 2.5rem;
  font-weight: 700;
  color: #fff;
  margin: 10px 0;
}

.stat-label {
  color: #bbb;
  font-size: 1.1rem;
  letter-spacing: 0.5px;
}

/* Animations */
@keyframes fadeInDown {
  0% { opacity: 0; transform: translateY(-30px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.liquid-wave-divider {
  position: relative;
  height: 120px;
  width: 100%;
  overflow: hidden;
  /* background: linear-gradient(to bottom, #000000, #0a0a0a, #121212); */
  background:  #0b0b0b;
}

/* Common wave style */
.liquid-wave-divider .wave-layer {
  position: absolute;
  bottom: 0;
  width: 200%;
  height: 100%;
  animation: waveFlow 10s linear infinite;
  opacity: 0.4;
}

/* Layer Colors + Depth Effects */
.wave-layer1 path {
  fill: rgba(20, 20, 20, 0.8);
  
}
.wave-layer2 path {
  fill: rgba(40, 40, 40, 0.6);
  
}
.wave-layer3 path {
  fill: rgba(70, 70, 70, 0.5);
  
}

/* Layer Speeds (Different for realism) */
.wave-layer1 {
  animation-duration: 14s;
  animation-direction: normal;
}
.wave-layer2 {
  animation-duration: 10s;
  animation-direction: reverse;
}
.wave-layer3 {
  animation-duration: 18s;
  animation-direction: normal;
}

/* Wave horizontal flowing motion */
@keyframes waveFlow {
  0% {
    transform: translateX(0) translateY(0);
  }
  50% {
    transform: translateX(-25%) translateY(4px);
  }
  100% {
    transform: translateX(-50%) translateY(0);
  }
}

/* Subtle glow + reflection */
.liquid-wave-divider::after {
  content: "";
  position: absolute;
  top: -20px;
  left: 0;
  width: 100%;
  height: 40px;
  /* background: radial-gradient(circle at 50% 0%, rgba(255,255,255,0.06), transparent 70%); */
  background: #0b0b0b;
  opacity: 0.4;
  pointer-events: none;
}

/* Hover effect for luxury look */
/* .liquid-wave-divider:hover .wave-layer {
  opacity: 0.6;
  filter: drop-shadow(0 0 10px rgba(255,255,255,0.1));
} */






</style>
<script>
    const canvas = document.getElementById("snowCanvas");
const ctx = canvas.getContext("2d");

let snowflakes = [];

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

function createSnowflakes(count) {
  snowflakes = [];
  for (let i = 0; i < count; i++) {
    snowflakes.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      radius: Math.random() * 2 + 1,
      speedY: Math.random() * 1 + 0.5,
      speedX: Math.random() * 0.5 - 0.25,
    });
  }
}

function drawSnowflakes() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
  ctx.beginPath();

  snowflakes.forEach(flake => {
    ctx.moveTo(flake.x, flake.y);
    ctx.arc(flake.x, flake.y, flake.radius, 0, Math.PI * 2);
  });

  ctx.fill();
  moveSnowflakes();
}

function moveSnowflakes() {
  snowflakes.forEach(flake => {
    flake.y += flake.speedY;
    flake.x += flake.speedX;

    if (flake.y > canvas.height) flake.y = 0;
    if (flake.x > canvas.width) flake.x = 0;
    if (flake.x < 0) flake.x = canvas.width;
  });
}

function animateSnow() {
  drawSnowflakes();
  requestAnimationFrame(animateSnow);
}

createSnowflakes(120);
animateSnow();


const track = document.getElementById("sliderTrack");
const dotsContainer = document.getElementById("dotsContainer");
const totalImages = track.children.length;
const imagesPerSlide = 5;
const totalSlides = Math.ceil(totalImages / imagesPerSlide);

let currentSlide = 0;

// Create dots
for (let i = 0; i < totalSlides; i++) {
  const dot = document.createElement("span");
  dot.addEventListener("click", () => goToSlide(i));
  dotsContainer.appendChild(dot);
}

function goToSlide(index) {
  currentSlide = index;
  const offset = -(100 / imagesPerSlide) * index;
  track.style.transform = `translateX(${offset}%)`;

  updateDots();
}

function updateDots() {
  const allDots = dotsContainer.querySelectorAll("span");
  allDots.forEach(dot => dot.classList.remove("active"));
  if (allDots[currentSlide]) allDots[currentSlide].classList.add("active");
}

// Auto-slide every 5s
setInterval(() => {
  currentSlide = (currentSlide + 1) % totalSlides;
  goToSlide(currentSlide);
}, 5000);

goToSlide(0); // Init

// ===== STATS COUNTER ANIMATION =====
document.addEventListener("DOMContentLoaded", () => {
  const counters = document.querySelectorAll(".stat-number");
  const speed = 200; // smaller = faster

  const animateCounters = () => {
    counters.forEach(counter => {
      const updateCount = () => {
        const target = +counter.getAttribute("data-target");
        const count = +counter.innerText;
        const increment = target / speed;

        if (count < target) {
          counter.innerText = Math.ceil(count + increment);
          setTimeout(updateCount, 20);
        } else {
          counter.innerText = target.toLocaleString();
        }
      };
      updateCount();
    });
  };

  // Trigger when section is in view
  const section = document.querySelector(".stats-section");
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        animateCounters();
        observer.disconnect();
      }
    });
  }, { threshold: 0.4 });

  observer.observe(section);
});

 

</script>